<app-header></app-header>
<section class="section-padding section_match_details">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-8">
                <div class="allside-shadow">

                    <div class="bg-body-secondary position-relative" style="height: var(--banner-height);">
                        <div *ngIf="isLoading" class="loading-overlay text-center">
                            <p>Loading content, please wait...</p>
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                        <iframe *ngIf="sanitizedUrl" (load)="onIframeLoad()" [src]="sanitizedUrl" class="img-fluid w-100 h-100" width="600" height="400" frameborder="0" allowfullscreen></iframe>

                        <!-- <img src="assets/images/match_banner.jpg" alt="Match Banner" class="img-fluid w-100 h-100">
                        <div class="position-absolute top-50 start-50 translate-middle score_board">
                            <h6 class="text-white text-center">International One Day Match</h6>
                            <h4 class="match_title text-white text-center">India Vs Australia</h4>
                            <p class="text-white text-center">IND Need 250 Balls 175 Runs to Win</p>
                            <div class="score-details d-block d-lg-flex justify-content-between text-center">
                                <div>
                                    <h5>IND</h5>
                                    <h3>45-0 <span class="mx-2">/</span>3.2 Overs</h3>
                                    <p class="mb-1">CR : <span>6.5</span></p>
                                    <p class="mb-0">RR : <span>4.7</span></p>
                                </div>
                                <div class="batting-namers mt-3 text-center">
                                    <h6 class="mb-1">Rohit Sharma 20 (15) <span>*</span></h6>
                                    <h6>S Gill 25 (10) <span></span></h6>
                                    <div>
                                        <ul class="per-ball list-unstyled d-flex justify-content-center">
                                            <li>1</li>
                                            <li class="boundry">4</li>
                                            <li class="wicket">W</li>
                                            <li class="no-ball">N</li>
                                            <li class="wide">Wd</li>
                                            <li class="six">6</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="batting-namers mt-3">
                                    <h5>AUS</h5>
                                    <h6 class="mb-1">MR Starc</h6>
                                    <p><span>2.5</span><span class="mx-2">/</span><span>0 Wkts</span><span class="mx-2">/</span><span>20 Runs</span></p>
                                </div>

                            </div>
                             <div class="d-flex justify-content-center align-items-center gap-3">
                                <img src="assets/images/India.jpg" alt="India" class="img-fluid h-100" width="100">
                                <div class="text-white text-center">
                                    <h3>Scores</h3>
                                    <span>155/5</span>
                                </div>
                                <img src="assets/images/Australia.jpg" alt="Australia" class="img-fluid h-100" width="100">
                            </div>
                        </div> -->
                    </div>
                    <div class="row row-cols-lg-3 row-cols-1 ">
                        <div class="">
                            <div class="text-center p-3">
                                <p class="fw-semibold mb-0">Start Time: {{ matchDetails?.openDate | customDate }}
                                    <!-- <br> Time remaining: 10:34:37 -->
                                </p>
                            </div>
                        </div>
                        <div class="">
                            <div class="text-center p-3">
                                <h6 class="my-0">Commentary</h6>
                                <p class="mb-0">Not available</p>
                            </div>
                        </div>
                        <div class="">
                            <div class="text-center p-3">
                                <p class="fw-semibold mb-0">Market liability: 0.00 <br> Number of Winner:</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mt-4">
                    <div class="row row-gap-3">
                        <div class="col-md-12">
                            <!-- match Odds -->
                            <div class="row row-cols-1 row-cols-xl-2">
                                <div class="col">
                                    @for(r of matchOdds;track r.marketId) {
                                        <div class="allside-shadow p-2 winner-box">
                                            <h5 class="fs-6 fw-bold text-primary-color title_bg">{{r?.Name}}</h5>
                                            <div class="d-flex justify-content-between mb-2">
                                                <h5 class="fs-6 fw-bold text-teritary-color">Min -{{limitSettings?.match?.minBet}} Max - {{limitSettings?.match?.maxBet}}</h5>
                                                <button class="button-primary rounded-2 btn-sm" data-bs-toggle="modal" data-bs-target="#rules">Rules</button>
                                            </div>
                                            <div class="table-responsive  mb-4">
                                                <table class="table mb-0">
                                                    <thead>
                                                        <tr align="middle">
                                                          <!-- The first header cell for the runner name -->
                                                          <th class="border-end-0">Runner</th>
                                                          <!-- Header for the group of available back odds -->
                                                          <th colspan="3" class="text-center" *ngIf="!isMobile">Available to Back</th>
                                                          <th class="text-center" *ngIf="isMobile">Available to Back</th>
                                                          <!-- Header for the group of available lay odds -->
                                                          <th colspan="3" class="text-center" *ngIf="!isMobile">Available to Lay</th>
                                                          <th class="text-center" *ngIf="isMobile">Available to Lay</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        @for(runner of r.runners;track runner.selectionId){

                                                      
                                                            <tr align="middle" [ariaColSpan]="isMobile ? 3 : 7">
                                                                <td class="border-end-0">
                                                                    <div class="d-block d-lg-flex justify-content-between">
                                                                        <span>{{runner.name}} </span>
                                                                        <ng-container *ngIf="getExpectedOutcome('match', r.marketId, runner.selectionId) as outcome">
                                                                            <span *ngIf="(+outcome) != 0"
                                                                              [ngClass]="{
                                                                                'text-danger': (+outcome) < 0,
                                                                                'text-success': (+outcome) > 0,
                                                                                'text-warning': (+outcome) === 0
                                                                              }">
                                                                              {{ outcome }}
                                                                            </span>
                                                                        </ng-container>
                                                                    </div>
                                                                </td>
                                                                    @if(runner.runnerStatus == 'OPEN'){
                                                                        <td
                                                                        *ngFor="let odd of runner.ex.availableToBack.slice(0, isMobile ? 1 : 3) | sort:'price'; let i = index"
                                                                        class="text-center border-start-0 cursor-pointer"
                                                                        [ngClass]="{
                                                                            'tb-primary2-bg': i === 0,
                                                                            'tb-primary1-bg': i === 1,
                                                                            'tb-primary-bg': i === 2,
                                                                        }"
                                                                        (click)="makeBet(
                                                                            {
                                                                                name : runner.name,
                                                                                selectionId : runner.selectionId,
                                                                                mid : r.marketId
                                                                            },
                                                                            {
                                                                                odds : odd.price,
                                                                                stake : odd.size,
                                                                            },
                                                                            'back',
                                                                            1
                                                                        )"
                                                                    >
                                                                        {{ odd.price }} <br> <span>{{ odd.size | numberSuffix }}</span>

                                                                    </td>
                                                                    <td
                                                                        *ngFor="let odd2 of  runner.ex.availableToLay.slice(0, isMobile ? 1 : 3) | sort:'price'; let ind = index"
                                                                        class="text-center border-start-0 cursor-pointer"
                                                                        [ngClass]="{
                                                                            'tb-secondary-bg': ind === 0,
                                                                            'tb-secondary1-bg': ind === 1,
                                                                            'tb-secondary2-bg': ind === 2,
                                                                        }"
                                                                        (click)="makeBet(
                                                                            {
                                                                                name : runner.name,
                                                                                selectionId : runner.selectionId,
                                                                                mid : r.marketId
                                                                            },
                                                                            {
                                                                                odds : odd2.price,
                                                                                stake : odd2.size,
                                                                            },
                                                                            'lay',
                                                                            1
                                                                        )"
                                                                    >
                                                                            {{ odd2.price }} <br> <span>{{ odd2.size | numberSuffix }}</span>
                                                                    </td>
                                                                    }
                                                                    @else {
                                                                        <td class="suspend" colspan="6">suspended</td>
                                                                    }
                                                            </tr>
                                                            <tr [ariaColSpan]="isMobile ? 3 : 7">
                                                                <td colspan="12" class="p-0">
                                                                    @if(betInputVisible){
            
                                                                      <div *ngIf="selectionId == runner.selectionId "
                                                                          class="allside-shadow1  mt-2 mb-2 pt-0"
                                                                          [ngClass]="{
                                                                              'tb-primary-bg': betType === 'back',
                                                                              'tb-secondary-bg': betType === 'lay'
                                                                          }"
                                                                      >
                                                                          <!-- mobile -->
                                                                          <h6 class="fs-6 title_bg mt-0 ">Bet Slip</h6>
                                                                          <!-- <p class="text-center p-3 mb-0">Single Bet</p> -->
                                                                          <form [formGroup]="betForm">
                                                                              <div class="text-center">
                                                                                  <!-- <div class="text-end mb-3">
                                                                                    <button class="btn btn-sm btn-outline-secondary">Customize Stake Button <i class="bi bi-pencil-square"></i></button>
                                                                                  </div> -->
            
                                                                                  <div class="back_bet p-2"
            
                                                                                  >
                                                                                  <div class="row align-items-center row-gap-2">
                                                                                    <div class="col-sm-6">
                                                                                      <label class="fw-semibold">Odds</label><br>
                                                                                      <div class="d-flex align-items-center">
                                                                                        <button class="btn text-white bg-black rounded-end-0" (click)="adjustOdds(false)">-</button>
                                                                                        <input type="number" class="form-control" formControlName="odds">
                                                                                        <button class="btn text-white bg-black rounded-start-0" (click)="adjustOdds(true)">+</button>
                                                                                      </div>
                                                                                    </div>
                                                                                  
                                                                                    <div class="col-sm-6">
                                                                                          <label class="fw-semibold">Stake</label>
                                                                                      <input type="number" class="form-control" formControlName="stake">
                                                                                    </div>
                                                                                    <div class="col-6">
                                                                                        <label class="fw-semibold d-block">Profit</label>
                                                                                        <span class="text-success">{{ betForm.value.profit }}</span>
                                                                                      </div>
                                                  
                                                                                      <div class="col-6 mt-0">
                                                                                        <label class="fw-semibold d-block">Liability</label>
                                                                                        <span class="text-danger">{{ betForm.value.liability }}</span>
                                                                                      </div>
                                                                                    <div class="mt-4">
                                                                                        <ul class="bet_amounts list-unstyled d-flex justify-content-around gap-2 mb-0 flex-wrap">
                                                                                            <li *ngFor="let amount of [100, 500, 1000, 5000, 10000, 25000, 50000]" (click)="setStake(amount)">
                                                                                                {{ amount }}
                                                                                              </li>
                                                                                          <!-- <li>Edit</li> -->
                                                                                        </ul>
                                                                                      </div>
                                                                                    <div class="col-12 col-sm-12 col-lg-6 d-flex justify-content-between align-items-center p-2">
                                                                                      <button (click)="clearBetInput()" class="btn btn-sm button-secondary me-2">Clear All</button>
                                                                                      <button (click)="placeBet()" class="btn btn-sm button-secondary me-2">Submit</button>
                                                                                    </div>
                                                                                  </div>
                                                                                  </div>
                                                                              </div>
                                                                          </form>
            
                                                                      </div>
            
                                                                  }
                                                                </td>
                                                            </tr>
                                                        }
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                       

                                    }

                                    <!-- Book Maker -->
                                    @if(bookmakerOdds.length) {
                                        @for(bookmakerOdd of bookmakerOddsList;track bookmakerOdd.title) {
                                        
                                        <div class="allside-shadow p-2 mt-4">
                                            <h5 class="fs-6 fw-bold text-primary-color title_bg">{{bookmakerOdd.title}}</h5>
                                            <div class="d-flex justify-content-between mb-2">
                                                <h5 class="fs-6 fw-bold text-teritary-color">Min -{{limitSettings?.bookmark?.minBet}} Max - {{limitSettings?.bookmark?.maxBet}}</h5>
                                                <button class="button-primary rounded  btn-sm" data-bs-toggle="modal" data-bs-target="#bm-rules">Rules</button>
                                            </div>
                                            <div class="table-responsive table_shadow mb-4">
                                                <table class="table mb-0">
                                                    <thead>
                                                        <tr align="middle">
                                                            <th class="">Runner</th>
                                                            <th class="">Back</th>
                                                            <th class="">Lay</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>

                                                        <tr align="middle" *ngFor="let odds of bookmakerOdd.eventList">
                                                            <th class="border-end-0">
                                                                <div class="d-block d-lg-flex justify-content-between">
                                                                    <span>{{odds.nation}} </span>
                                                                        <ng-container *ngIf="getExpectedOutcome('bookmaker', odds.mid, odds.sid) as outcome">
                                                                            <span *ngIf="(+outcome) != 0"
                                                                              [ngClass]="{
                                                                                'text-danger': (+outcome) < 0,
                                                                                'text-success': (+outcome) > 0,
                                                                                'text-warning': (+outcome) === 0
                                                                              }">
                                                                              {{ outcome }}
                                                                            </span>
                                                                        </ng-container>
                                                                </div>
                                                            </th>
                                                            <td
                                                                class="tb-primary-bg cursor-pointer"
                                                                *ngIf="odds.gstatus == ''"
                                                                [ngClass]="{
                                                                    'fancy-suspend' : odds.b1 == 0,
                                                                    'cursor-pointer' : odds.b1 != 0,
                                                                }"
                                                                (click)="makeBookMakerBet(
                                                                    {
                                                                        name : odds.nation,
                                                                        selectionId : odds.sid,
                                                                        mid : odds.mid
                                                                    },
                                                                    {
                                                                        odds : odds.b1,
                                                                        stake : 0,
                                                                    },
                                                                    'back',
                                                                    2
                                                                )">
                                                                {{odds.b1 | number:'1.0-0'}} <br>
                                                            </td>
                                                            <td *ngIf="odds.gstatus == ''"
                                                            class="tb-secondary-bg cursor-pointer"
                                                            [ngClass]="{
                                                                'fancy-suspend' : odds.l1 == 0,
                                                                'cursor-pointer' : odds.l1 != 0,
                                                            }"
                                                            (click)="makeBookMakerBet(
                                                                    {
                                                                        name : odds.nation,
                                                                        selectionId : odds.sid,
                                                                        mid : odds.mid
                                                                    },
                                                                    {
                                                                        odds : odds.l1,
                                                                        stake : 0,
                                                                    },
                                                                    'lay',
                                                                    2
                                                                )"
                                                            >
                                                                {{odds.l1 | number:'1.0-0'}} <br>
                                                            </td>
                                                            <td colspan="2" *ngIf="odds.gstatus != ''" class="suspend">
                                                                {{odds.gstatus}}
                                                            </td>
                                                        </tr>

                                                    </tbody>
                                                </table>
                                            </div>
                                            @if(betInputVisible){
                                              <div *ngIf="bookmakerVisible"
                                                  class="allside-shadow1 mt-4 pt-0"
                                                  [ngClass]="{
                                                      'tb-primary-bg': betType === 'back',
                                                      'tb-secondary-bg': betType === 'lay'
                                                  }"
                                              >
                                                  <h6 class="fs-6 title_bg mt-0">Bet Slip</h6>
                                                  <!-- <p class="text-center p-3 mb-0">Single Bet</p> -->
                                                  <form [formGroup]="betForm">
                                                      <div class="text-center">
                                                          <!-- <div class="text-end mb-3">
                                                            <button class="btn btn-sm btn-outline-secondary">Customize Stake Button <i class="bi bi-pencil-square"></i></button>
                                                          </div> -->

                                                          <div class="back_bet p-2"

                                                          >
                                                            <div class="row align-items-center row-gap-3">
                                                              <div class="col-sm-5  col-lg-6">
                                                                <div class="text-lg-start">
                                                                  (Bet {{betType === 'back' ? 'for' : 'against'}})   {{ selectedRunner?.name }}
                                                                </div>
                                                              </div>

                                                              <div class="col-6 col-sm-3 col-lg-6">
                                                                <label class="fw-semibold">Odds</label><br>
                                                                <div class="d-flex align-items-center">
                                                                  <button class="btn text-white bg-black rounded-end-0" (click)="adjustOdds(false)">-</button>
                                                                  <input [disabled]="!isMarketOdds()" type="number" class="form-control" formControlName="odds">
                                                                  <button class="btn text-white bg-black rounded-start-0" (click)="adjustOdds(true)">+</button>
                                                                </div>
                                                              </div>

                                                              <div class="col-6 col-sm-2 col-lg-6 mt-0 mt-lg-4">
                                                                <label class="fw-semibold">Stake</label>
                                                                <input type="number" class="form-control" formControlName="stake">
                                                              </div>
                                                              <div class="result-content">
                                                              <div class="col-sm-2 col-lg-6 mt-0 mt-lg-4">
                                                                <label class="fw-semibold d-block">Profit</label>
                                                                <span class="text-success">{{ betForm.value.profit }}</span>
                                                              </div>

                                                              <div class="col-sm-2 col-lg-6 mt-0 mt-lg-4">
                                                                <label class="fw-semibold d-block">Liability</label>
                                                                <span class="text-danger">{{ betForm.value.liability }}</span>
                                                              </div>
                                                            </div>
                                                            </div>

                                                            <div class="mt-4">
                                                              <ul class="bet_amounts list-unstyled d-block justify-content-around gap-2 mb-0">
                                                                <li *ngFor="let amount of [100, 500, 1000, 5000, 10000, 25000, 50000]" (click)="setStake(amount)">
                                                                  {{ amount }}
                                                                </li>
                                                                <!-- <li>Edit</li> -->
                                                              </ul>
                                                            </div>
                                                          </div>

                                                          <div class="d-flex justify-content-between align-items-center p-2">
                                                            <button (click)="clearBetInput()" class="btn btn-sm button-secondary">Clear All</button>
                                                            <button (click)="placeBet()" class="btn btn-sm button-secondary">Submit</button>
                                                          </div>
                                                      </div>
                                                  </form>

                                              </div>
                                          }
                                        </div>
                                        }
                                    }


                                </div>
                                <!-- Fancy Market -->
                               <div class="col">
                                @if(fancyOdds.length > 0) {
                                    <div class="allside-shadow p-2 fancymarket-box">
                                        <h5 class="fs-6 fw-bold text-primary-color title_bg">Fancy Markets</h5>
                                        <div class="d-flex justify-content-between mb-2">
                                            <h5 class="fs-6 fw-bold text-teritary-color">Min -{{limitSettings?.fancy?.minBet}} Max - {{limitSettings?.fancy?.maxBet}}</h5>
                                            <button class="button-primary rounded  btn-sm" data-bs-toggle="modal" data-bs-target="#fancy-rules">Rules</button>
                                        </div>
                                        <div class="table-responsive">
                                            <table class="table mb-0">
                                                <thead>
                                                    <tr align="middle">
                                                        <th class=""></th>
                                                        <th class="">No</th>
                                                        <th class="">Yes</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    @for(odd of fancyOdds;track odd.sid) {
                                                        <tr align="middle">
                                                            <th class="border-end-0">
                                                                <div class="d-block d-lg-flex">
                                                                {{odd.nation}}
                                                                </div>
                                                            </th>
                                                            <td *ngIf="odd.gstatus == ''"
                                                                class="tb-secondary-bg"
                                                                [ngClass]="{
                                                                    'fancy-suspend' : odd.ls1 == 0,
                                                                    'cursor-pointer' : odd.ls1 != 0,
                                                                }"
                                                                (click)="makeBet(
                                                                {
                                                                    name : odd.nation,
                                                                    selectionId : odd.l1,
                                                                    mid : odd.sid
                                                                },
                                                                {
                                                                    odds : odd.ls1,
                                                                    stake : 0,
                                                                },
                                                                'lay',
                                                                3
                                                            )"
                                                            >
                                                                    {{odd.l1}} <br> <span>{{odd.ls1}}</span>
                                                            </td>
                                                            <td
                                                            class="tb-primary-bg"  *ngIf="odd.gstatus == ''"
                                                            [ngClass]="{
                                                                    'fancy-suspend' : odd.bs1 == 0,
                                                                    'cursor-pointer' : odd.bs1 != 0,
                                                                }"
                                                                (click)="makeBet(
                                                                {
                                                                    name : odd.nation,
                                                                    selectionId : odd.b1,
                                                                    mid : odd.sid
                                                                },
                                                                {
                                                                    odds : odd.bs1,
                                                                    stake : 0,
                                                                },
                                                                'back',
                                                                3
                                                            )"
                                                            >
                                                                    {{odd.b1}} <br> <span>{{odd.bs1}}</span>
                                                            </td>
                                                            <td align="middle" colspan="2" *ngIf="odd.gstatus != ''" class="suspend">
                                                                {{odd.gstatus}}
                                                            </td>

                                                        </tr>

                                                        <td colspan="12">
                                                        @if(betInputVisible){

                                                          <div *ngIf="selectedId === odd.sid "
                                                              class="allside-shadow1  mt-2 mb-2 pt-0"
                                                              [ngClass]="{
                                                                  'tb-primary-bg': betType === 'back',
                                                                  'tb-secondary-bg': betType === 'lay'
                                                              }"
                                                          >
                                                              <!-- mobile -->
                                                              <h6 class="fs-6 title_bg mt-0 ">Bet Slip</h6>
                                                              <!-- <p class="text-center p-3 mb-0">Single Bet</p> -->
                                                              <form [formGroup]="betForm">
                                                                  <div class="text-center">
                                                                      <!-- <div class="text-end mb-3">
                                                                        <button class="btn btn-sm btn-outline-secondary">Customize Stake Button <i class="bi bi-pencil-square"></i></button>
                                                                      </div> -->

                                                                      <div class="back_bet p-2"

                                                                      >
                                                                      <div class="row align-items-center row-gap-3">
                                                                        <div class="col-12 col-sm-6 col-lg-6">
                                                                          <label class="fw-semibold">Odds</label><br>
                                                                          <div class="d-flex align-items-center">
                                                                            <button class="btn text-white bg-black rounded-end-0" (click)="adjustOdds(false)">-</button>
                                                                            <input type="number" class="form-control" formControlName="odds">
                                                                            <button class="btn text-white bg-black rounded-start-0" (click)="adjustOdds(true)">+</button>
                                                                          </div>
                                                                        </div>
                                                                      
                                                                        <div class="col-12 col-sm-6 col-lg-6 ">
                                                                              <label class="fw-semibold">Stake</label>
                                                                          <input type="number" class="form-control" formControlName="stake">
                                                                        </div>

                                                                        <div class="col-6">
                                                                            <label class="fw-semibold d-block">Profit</label>
                                                                            <span class="text-success">{{ betForm.value.profit }}</span>
                                                                          </div>
                                      
                                                                          <div class="col-6">
                                                                            <label class="fw-semibold d-block">Liability</label>
                                                                            <span class="text-danger">{{ betForm.value.liability }}</span>
                                                                          </div>

                                                                        <div class="">
                                                                          <ul class="bet_amounts list-unstyled d-flex justify-content-around gap-2 mb-0 flex-wrap">
                                                                            <li *ngFor="let amount of [100, 500, 1000, 5000, 10000, 25000, 50000]" (click)="setStake(amount)">
                                                                              {{ amount }}
                                                                            </li>
                                                                            <!-- <li>Edit</li> -->
                                                                          </ul>
                                                                        </div>
                                                                      
                                                                        <div class="col-12 col-sm-12 col-lg-6 mt-4 d-flex justify-content-between align-items-center p-2">
                                                                          <button (click)="clearBetInput()" class="btn btn-sm button-secondary me-2">Clear All</button>
                                                                          <button (click)="placeBet()" class="btn btn-sm button-secondary me-2">Submit</button>
                                                                        </div>
                                                                      </div>
                                                                      

                                                                      
                                                                      </div>


                                                                  </div>
                                                              </form>

                                                          </div>

                                                      }
                                                    </td>

                                                    }

                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                }
                               </div>
                            </div>


                        </div>
                        <!-- <div class="col-md-6">
                            <div class="allside-shadow p-2">
                                <h6 class="fw-bold text-primary-color">Match Odds</h6>
                                <div class="">
                                    <div class="accordion" id="accordionPanelsStayOpenExample">
                                        <div class="accordion-item border-0">
                                            <h2 class="accordion-header mt-0">
                                                <button class="accordion-button title_bg border-0" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne" >
                                                Winner
                                                </button>
                                            </h2>
                                            <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show">
                                                <div class="accordion-body p-0">
                                                    <table class="table mb-0">
                                                        <tbody>
                                                            <tr>
                                                                <td>Palicova, Barbara</td>
                                                                <td class="d-inline-block w-100 text-end bg-warning">1.94</td>
                                                            </tr>
                                                            <tr>
                                                                <td>Saito, Sara</td>
                                                                <td class="d-inline-block w-100 text-end bg-warning">1.85</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="accordion-item mt-4 border-0">
                                            <h2 class="accordion-header">
                                                <button class="accordion-button title_bg" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo" >
                                                Game Handicap
                                                </button>
                                            </h2>
                                            <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse show">
                                                <div class="accordion-body p-0">
                                                    <table class="table mb-0">
                                                        <tbody>
                                                            <tr>
                                                                <td>Palicova, Barbara (+1.5)</td>
                                                                <td class="d-inline-block w-100 text-end bg-warning">1.82</td>
                                                            </tr>
                                                            <tr>
                                                                <td>Saito, Sara (-1.5)</td>
                                                                <td class="d-inline-block w-100 text-end bg-warning">2</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="accordion-item mt-4 border-0">
                                            <h2 class="accordion-header">
                                                <button class="accordion-button title_bg" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseThree" >
                                                Total Games
                                                </button>
                                            </h2>
                                            <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse show">
                                                <div class="accordion-body p-0">
                                                    <table class="table mb-0">
                                                        <tbody>
                                                            <tr>
                                                                <td>over 21.5</td>
                                                                <td class="d-inline-block w-100 text-end bg-warning">1.94</td>
                                                            </tr>
                                                            <tr>
                                                                <td>under 21.5</td>
                                                                <td class="d-inline-block w-100 text-end bg-warning">1.88</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="allside-shadow p-2 mt-4">
                                <h6 class="fw-bold text-primary-color">Sportsbook</h6>
                                <div class="">
                                    <div class="accordion" id="accordionPanelsStayOpenExample">
                                        <div class="accordion-item border-0">
                                            <h2 class="accordion-header mt-0">
                                                <button class="accordion-button title_bg" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne" >
                                                Winner
                                                </button>
                                            </h2>
                                            <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show">
                                                <div class="accordion-body p-0">
                                                    <table class="table mb-0">
                                                        <tbody>
                                                            <tr class="position-relative">
                                                                <td>Palicova, Barbara</td>
                                                                <td class="d-inline-block w-100 text-end bg-warning">1.94</td>
                                                                <div class="status_overlay position-absolute top-0 start-0 w-100">Suspended</div>
                                                            </tr>
                                                            <tr>
                                                                <td>Saito, Sara</td>
                                                                <td class="d-inline-block w-100 text-end bg-warning">1.85</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="accordion-item border-0">
                                            <h2 class="accordion-header">
                                                <button class="accordion-button title_bg" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo" >
                                                Game Handicap
                                                </button>
                                            </h2>
                                            <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse show">
                                                <div class="accordion-body p-0">
                                                    <table class="table mb-0">
                                                        <tbody>
                                                            <tr>
                                                                <td>Palicova, Barbara (+1.5)</td>
                                                                <td class="d-inline-block w-100 text-end bg-warning">1.82</td>
                                                            </tr>
                                                            <tr>
                                                                <td>Saito, Sara (-1.5)</td>
                                                                <td class="d-inline-block w-100 text-end bg-warning">2</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="accordion-item border-0">
                                            <h2 class="accordion-header">
                                                <button class="accordion-button title_bg" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseThree" >
                                                Total Games
                                                </button>
                                            </h2>
                                            <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse show">
                                                <div class="accordion-body p-0">
                                                    <table class="table mb-0">
                                                        <tbody>
                                                            <tr>
                                                                <td>over 21.5</td>
                                                                <td class="d-inline-block w-100 text-end bg-warning">1.94</td>
                                                            </tr>
                                                            <tr>
                                                                <td>under 21.5</td>
                                                                <td class="d-inline-block w-100 text-end bg-warning">1.88</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->
                    </div>
                </div>
            </div>
            <div class="col-lg-4 mt-lg-0 mt-4">
               <div class="sidebox">
                <div class="">
                    <button class="title_bg w-100 text-start rounded" type="button" data-bs-toggle="collapse" data-bs-target="#multiCollapseExample2" aria-expanded="false" aria-controls="multiCollapseExample2">
                        <i class="bi bi-broadcast-pin fs-6"></i> Live Broadcast
                    </button>
                    <!-- <div class="collapse show" id="multiCollapseExample2">
                         <div class="card card-body rounded-top-0 p-0 border-0">
                            <iframe width="100%" class="tv-iframe" title="tv-live-match-container" height="200px" src="https://alpha-n.qnsports.live/route/raj.php?id=3058" style="margin-bottom: -9px;"></iframe>
                            <video height="250" controls muted autoplay>
                                <source src="assets/images/sample_video.mp4" type="video/mp4">
                                <img src="assets/images/live.png" alt="Live streaming" class="img-fluid" />
                            </video>
                        </div>
                    </div> -->
                </div>
                @if(betInputVisible){
                    <div
                        class="allside-shadow-bottom mt-4 pt-0"
                        [ngClass]="{
                            'tb-primary-bg': betType === 'back',
                            'tb-secondary-bg': betType === 'lay'
                        }"
                    >
                        <h6 class="fs-6 title_bg mt-0">Bet Slip</h6>
                        <!-- <p class="text-center p-3 mb-0">Single Bet</p> -->
                        <form [formGroup]="betForm">
                            <div class="text-center">
                                <!-- <div class="text-end mb-3">
                                  <button class="btn btn-sm btn-outline-secondary">Customize Stake Button <i class="bi bi-pencil-square"></i></button>
                                </div> -->

                                <div class="back_bet p-2"

                                >
                                  <div class="row align-items-center row-gap-3">
                                    <div class="col-sm-5 col-lg-6">
                                      <div class="text-lg-start">
                                        (Bet {{betType === 'back' ? 'for' : 'against'}})  <br> {{ selectedRunner?.name }}
                                      </div>
                                    </div>

                                    <div class="col-6 col-sm-3 col-lg-6">
                                      <label class="fw-semibold">Odds</label><br>
                                      <div class="d-flex align-items-center">
                                        <button class="btn text-white bg-black rounded-end-0" (click)="adjustOdds(false)">-</button>
                                        <input [disabled]="!isMarketOdds()" type="number" class="form-control" formControlName="odds">
                                        <button class="btn text-white bg-black rounded-start-0" (click)="adjustOdds(true)">+</button>
                                      </div>
                                    </div>

                                    <div class="col-6 col-sm-2 col-lg-6 mt-0 mt-lg-4">
                                      <label class="fw-semibold">Stake</label>
                                      <input type="number" class="form-control" formControlName="stake">
                                    </div>

                                    <div class="col-sm-2 col-lg-6 mt-0 mt-lg-4">
                                      <label class="fw-semibold d-block">Profit</label>
                                      <span class="text-success">{{ betForm.value.profit }}</span>
                                    </div>

                                    <div class="col-sm-2 col-lg-6 mt-0 mt-lg-4">
                                      <label class="fw-semibold d-block">Liability</label>
                                      <span class="text-danger">{{ betForm.value.liability }}</span>
                                    </div>
                                  </div>

                                  <div class="mt-4">
                                    <ul class="bet_amounts list-unstyled d-block justify-content-around gap-2 mb-0">
                                      <li *ngFor="let amount of [100, 500, 1000, 5000, 10000, 25000, 50000]" (click)="setStake(amount)">
                                        {{ amount }}
                                      </li>
                                      <!-- <li>Edit</li> -->
                                    </ul>
                                  </div>
                                </div>

                                <div class="d-flex justify-content-between align-items-center p-2">
                                  <button (click)="clearBetInput()" class="btn btn-sm button-secondary">Clear All</button>
                                  <button (click)="placeBet()" class="btn btn-sm button-secondary">Submit</button>
                                </div>
                            </div>
                        </form>

                    </div>
                }

                <div class="allside-shadow p-2 mt-4">
                    <h5 class="fs-6 title_bg p-2">My Bets</h5>
                    <h6 class="fw-bold text-primary-color">Matched Bets</h6>
                    <div class="table-responsive">
                        <table class="table" *ngIf="matchedBets.length">
                            <thead>
                                <th class="fw-semibold">Runner</th>
                                <th class="fw-semibold">Market</th>
                                <th class="fw-semibold">Odd</th>
                                <th class="fw-semibold">Stake</th>
                                <th class="fw-semibold">Type</th>
                            </thead>
                            <tbody>
                                @for (bet of matchedBets; track bet._id) {
                                    <tr
                                        [ngStyle]="{
                                            'background-color': bet.type === 'lay' ? '#f7d0e0' : bet.type === 'back' ? '#daecfa' : 'inherit'
                                        }"
                                    >
                                        <td>
                                            {{
                                                bet.marketType !=3 ?
                                                selectionIdName(bet) :
                                                bet?.eventName + ' / ' + bet?.selectionId
                                            }}
                                        </td>
                                        <td>
                                            {{selectionMarketName(bet)}}
                                        </td>
                                        <td>{{ bet.odds }}</td>
                                        <td>{{ bet.initialStake }}</td>
                                        <td>{{ bet.type }}</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                    <!-- <h6 class="fw-bold text-primary-color">Unmatched Bets</h6>
                    <table class="table">
                        <thead>
                            <th class="fw-semibold">Runner Name</th>
                            <th class="fw-semibold">Odd</th>
                            <th class="fw-semibold">Stake</th>
                            <th class="fw-semibold">Type</th>
                            <th class="fw-semibold">Actions</th>
                        </thead>
                        <tbody>
                            @for (bet of unmatchedBets; track bet._id) {
                                <tr>
                                    <td>{{ selectionIdName(bet.selectionId) }}</td>
                                    <td>{{ bet.odds }}</td>
                                    <td>{{ bet.stake }}</td>
                                    <td>{{ bet.type }}</td>
                                    <td><button (click)="cancelBet(bet?._id)" class="btn btn-sm button-secondary">Cancel</button></td>
                                </tr>
                            }
                            @empty {
                                <tr>
                                    <td class="text-center">No records found</td>
                                </tr>
                            }

                        </tbody>
                    </table> -->
                </div>
               </div>
            </div>
        </div>
    </div>
</section>

<!-- Modal -->
<div class="modal fade" id="rules" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title fs-5 my-0" >Market Rules and Information</h2>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div id="rules"><b _ngcontent-paf-c72="">Market Information</b><br _ngcontent-paf-c72="">For further information please see Rules &amp; Regs.<br _ngcontent-paf-c72=""><br _ngcontent-paf-c72="">Who will win this match? At the start of play all unmatched bets will be cancelled and this market will be turned in-play. This market will not be actively managed therefore it is the responsibility of all users to manage their positions. <b _ngcontent-paf-c72=""><br _ngcontent-paf-c72=""><br _ngcontent-paf-c72="">Customers should be aware that:<br _ngcontent-paf-c72=""><br _ngcontent-paf-c72=""><li _ngcontent-paf-c72=""> Transmissions described as live by some broadcasters may actually be delayed and that all in-play matches are not necessarily televised. </li><br _ngcontent-paf-c72=""><li _ngcontent-paf-c72=""> The extent of any such delay may vary, depending on the set-up through which they are receiving pictures or data. </li><br _ngcontent-paf-c72=""><br _ngcontent-paf-c72=""></b><b _ngcontent-paf-c72=""><font _ngcontent-paf-c72="" color="red"> If the first set is not completed all bets on this market will be void.</font></b><br _ngcontent-paf-c72=""><br _ngcontent-paf-c72="">Please be aware that times may be subject to change. </div>
            </div>
            <!-- <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div> -->
        </div>
    </div>
</div>

<div class="modal fade" id="bm-rules" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title fs-5 my-0" >Market Rules and Information</h2>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <ol _ngcontent-paf-c72=""><li _ngcontent-paf-c72=""> Due to any reason any team will be getting advantage or disadvantage we are not concerned. </li><li _ngcontent-paf-c72=""> Company reserves the right to suspend/void any id/bets if the same is found to be illegitimate. For example incase of vpn/robot-use/multiple entry from same IP/ multiple bets at the same time (Punching) and others. Note : only winning bets will be voided. </li><li _ngcontent-paf-c72=""> We will simply compare both teams 25 overs score higher score team will be declared winner in ODI (25 over comparison) </li><li _ngcontent-paf-c72=""> We will simply compare both teams 10 overs higher score team will be declared winner in T20 matches (10 over comparison) </li><li _ngcontent-paf-c72=""> Any query about the result or rates should be contacted within 7 days of the specific event, the same will not be considered valid post 7 days from the event. </li><li _ngcontent-paf-c72=""> If two team ends up with equal points, then result will be given based on the official point table </li><li _ngcontent-paf-c72=""> Tennis:- Advance fancy market <ul _ngcontent-paf-c72=""><li _ngcontent-paf-c72=""> If the second set is not completed all bets regarding this market will be voided </li><li _ngcontent-paf-c72=""> If a player retires after completion of second set, then the market will be settled as three sets </li></ul></li><li _ngcontent-paf-c72=""> Virtual Cricket <ul _ngcontent-paf-c72=""><li _ngcontent-paf-c72="">At any situation if the video gets interrupted/stopped then the same cannot be continued due to any technical issues bookmaker market will be voided</li></ul></li></ol>
            </div>
            <!-- <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div> -->
        </div>
    </div>
</div>
<div class="modal fade" id="fancy-rules" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title fs-5 my-0" >Market Rules and Information</h2>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <ol _ngcontent-paf-c72=""><li _ngcontent-paf-c72=""> Once all session/fancy bets are completed and settled there will be no reversal even if the Match is Tied or is Abandoned. </li><li _ngcontent-paf-c72=""> Advance Session or Player Runs and all Fancy Bets are only valid for 20/50 overs full match each side. (Please Note this condition is applied only in case of Advance Fancy Bets only). </li><li _ngcontent-paf-c72=""> All advance fancy bets market will be suspended 60 mins prior to match and will be settled. </li><li _ngcontent-paf-c72=""> Under the rules of Session/Fancy Bets if a market gets Suspended for any reason whatsoever and does not resume then all previous Bets will remain Valid and become HAAR/JEET bets. </li><li _ngcontent-paf-c72=""> Incomplete Session/Fancy Bet will be cancelled but Complete Session will be settled. </li><li _ngcontent-paf-c72=""> In the case of Running Match getting Cancelled/ No Result/ Abandoned but the session is complete it will still be settled. Player runs / fall of wicket will be also settled at the figures where match gets stopped due to rain for the inning (D/L) , cancelled , abandoned , no result. </li><li _ngcontent-paf-c72=""> If a player gets Retired Hurt and one ball is completed after you place your bets then all the betting till then is and will remain valid. </li><li _ngcontent-paf-c72=""> All decisions relating to settlement of wrong market being offered will be taken by management. Management will consider all actual facts and decision taken will be full in final. </li><li _ngcontent-paf-c72=""> Valid for only 1st inning. <ul _ngcontent-paf-c72=""><li _ngcontent-paf-c72=""> Highest Inning Run :- This fancy is valid only for first inning of the match. </li><li _ngcontent-paf-c72=""> Lowest Inning Run :- This fancy is valid only for first inning of the match. </li></ul></li><li _ngcontent-paf-c72=""> If any fancy value gets passed, we will settle that market after that match gets over. For example :- If any market value is ( 22-24 ) and incase the result is 23 than that market will be continued, but if the result is 24 or above then we will settle that market. This rule is for the following market. <ul _ngcontent-paf-c72=""><li _ngcontent-paf-c72="">Total Sixes In Single Match</li><li _ngcontent-paf-c72="">Total Fours In Single Match</li><li _ngcontent-paf-c72="">Highest Over Run In Single Match</li><li _ngcontent-paf-c72="">Highest Individual Score By Batsman</li><li _ngcontent-paf-c72="">Highest Individual Wickets By Bowler</li></ul></li><li _ngcontent-paf-c72=""> If any fancy value gets passed, we will settle that market after that match gets over. For example :- If any market value is ( 22-24 ) and incase the result is 23 than that market will be continued, but if the result is 22 or below then we will settle that market. This rule is for the following market. <ul _ngcontent-paf-c72=""><li _ngcontent-paf-c72="">Lowest Inning Run</li><li _ngcontent-paf-c72="">Fastest Fifty</li><li _ngcontent-paf-c72="">Fastest Century</li></ul></li><li _ngcontent-paf-c72=""> If any case wrong rate has been given in fancy ,that particular bets will be cancelled (Wrong Commentary). </li><li _ngcontent-paf-c72=""> In case customer make bets in wrong fancy we are not liable to delete, no changes will be made and bets will be considered as confirm bet. </li><li _ngcontent-paf-c72=""><strong _ngcontent-paf-c72="">Dot Ball Market Rules</strong><ul _ngcontent-paf-c72=""><li _ngcontent-paf-c72="">Wides Ball - Not Count</li><li _ngcontent-paf-c72="">No Ball - Not Count</li><li _ngcontent-paf-c72="">Leg Bye - Not Count as A Dot Ball</li><li _ngcontent-paf-c72="">Bye Run - Not Count as A Dot Ball</li><li _ngcontent-paf-c72="">Run Out - On 1st Run Count as A Dot Ball</li><li _ngcontent-paf-c72="">Run Out - On 2nd n 3rd Run Not Count as a Dot Ball</li><li _ngcontent-paf-c72="">Out - Catch Out, Bowled, Stumped n LBW Count as A Dot Ball</li></ul></li><li _ngcontent-paf-c72=""><strong _ngcontent-paf-c72="">Bookmaker Rules</strong><ul _ngcontent-paf-c72=""><li _ngcontent-paf-c72=""> Due to any reason any team will be getting advantage or disadvantage we are not concerned. </li><li _ngcontent-paf-c72=""> We will simply compare both teams 25 overs score higher score team will be declared winner in ODI. </li><li _ngcontent-paf-c72=""> We will simply compare both teams 10 overs higher score team will be declared winner in T20 matches. </li></ul></li><li _ngcontent-paf-c72=""> Penalty Runs - Any Penalty Runs Awarded in the Match (In Any Running Fancy or ADV Fancy) Will Not be Counted While Settling in our Exchange. </li><li _ngcontent-paf-c72=""> Comparison Market - In Comparison Market We Don't Consider Tie or Equal Runs on Both the Innings While Settling . Second Batting Team Must need to Surpass 1st Batting's team Total to win otherwise on Equal Score or Below We declare 1st Batting Team as Winner . </li><li _ngcontent-paf-c72=""> Player Boundaries Fancy:- We will only consider Direct Fours and Sixes hit by BAT. </li><li _ngcontent-paf-c72=""><strong _ngcontent-paf-c72="">BOWLER RUN SESSION RULE </strong>:- <ul _ngcontent-paf-c72=""><li _ngcontent-paf-c72=""> IF BOWLER BOWL 1.1 OVER,THEN VALID ( FOR BOWLER 2 OVER RUNS SESSION ) </li><li _ngcontent-paf-c72=""> IF BOWLER BOWL 2.1 OVER,THEN VALID ( FOR BOWLER 3 OVER RUNS SESSION ) </li><li _ngcontent-paf-c72=""> IF BOWLER BOWL 3.1 OVER,THEN VALID ( FOR BOWLER 4 OVER RUNS SESSION ) </li><li _ngcontent-paf-c72=""> IF BOWLER BOWL 4.1 OVER,THEN VALID ( FOR BOWLER 5 OVER RUNS SESSION ) </li><li _ngcontent-paf-c72=""> IF BOWLER BOWL 9.1 OVER,THEN VALID ( FOR BOWLER 10 OVER RUNS SESSION ) </li></ul></li><li _ngcontent-paf-c72=""><strong _ngcontent-paf-c72="">Total Match Playing Over ADV</strong> We Will Settle this Market after Whole Match gets Completed Criteria :- We Will Count Only Round- Off Over For Both the Innings While Settling (For Ex :- If 1st Batting team gets all out at 17.3 , 18.4 or 19.5 we Will Count Such Overs as 17, 18 and 19 Respectively and if Match gets Ended at 17.2 , 18.3 or 19.3 Overs then we will Count that as 17 , 18 and 19 Over Respectively... and this Will Remain Same For Both the Innings .. In Case Of Rain or if Over gets Reduced then this Market will get Voided </li><li _ngcontent-paf-c72=""><strong _ngcontent-paf-c72="">3 WKT OR MORE BY BOWLER IN MATCH ADV</strong> We Will Settle this Market after Whole Match gets Completed . In Case Of Rain or if Over Gets Reduced then this Market Will get Voided </li><li _ngcontent-paf-c72=""><strong _ngcontent-paf-c72="">KHADDA</strong> ADV Khadda Fancy is Valid Only for First Innings of the Match In Case of Rain or If Over Gets Reduced then this Market Will get Voided Incomplete Session Bet will be Cancelled but Complete Session Will be Settled </li></ol>            </div>
            <!-- <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div> -->
        </div>
    </div>
</div>
<app-footer></app-footer>
